@model SudokuApp.Models.GameViewModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playing Sudoku</title>
    <link rel="stylesheet" href="~/css/app.css" asp-append-version="true" />
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Potta+One&display=swap" rel="stylesheet">
</head>
<body class="light">
<nav>
    <div class="nav-container">
        <a href="/" class="nav-logo">Sudoku</a>
        <div class="dark-mode-toggle" id="dark-mode-toggle">
            <i class='bx bxs-sun'></i>
            <i class='bx bxs-moon'></i>
        </div>
    </div>
</nav>

<div class="main" style="height: 100vh;">
    <div class="screen">
        <div class="main-game active" id="game-screen" style="transform: translateX(0);">
            
            <div class="main-sudoku-grid" id="sudoku-board">
                <div style="grid-column: span 9; text-align: center; padding: 20px;">Loading puzzle...</div>
            </div>

            <div class="main-game-info">
                <div class="main-game-info-box main-game-info-name">
                    <span>@Model.PlayerName</span>
                </div>
                <div class="main-game-info-box main-game-info-level">
                    <span>@Model.Level</span>
                </div>
            </div>

            <div class="main-game-info-box main-game-info-time">
                <span id="game-time">00:00</span>
                <div class="pause-btn" id="btn-pause"><i class='bx bx-pause'></i></div>
            </div>

            <div class="numbers">
                @for (int i = 1; i <= 9; i++)
                {
                    <div class="number">@i</div>
                }
                <div class="delete" id="btn-delete">X</div>
            </div>
            
            <div class="main-game-info" style="margin-top: 10px;">
                <div class="btn" id="btn-undo" style="height: 50px; font-size: 1rem;">Undo</div>
            </div>
        </div>

        <div class="pause-screen" id="pause-screen">
            <div class="btn btn-blue" id="btn-resume">Resume</div>
            <a href="/" class="btn">New Game</a>
        </div>

        <div class="result-screen" id="result-screen">
            <div class="congrate">Victory!</div>
            <div class="info">Time</div>
            <div id="result-time"></div>
            <a href="/" class="btn">New Game</a>
        </div>
    </div>
</div>

<script src="~/js/theme.js"></script>

<script type="module">
    import { SudokuUI } from '@Url.Content("~/js/game-ui.js")';

    document.addEventListener('DOMContentLoaded', () => {
        window.gameUI = new SudokuUI();
        
        const level = '@Model.Level';
        window.gameUI.init(level);

        document.getElementById('btn-pause').addEventListener('click', () => {
             document.getElementById('pause-screen').classList.add('active');
             window.gameUI.isPaused = true;
        });
        document.getElementById('btn-resume').addEventListener('click', () => {
             document.getElementById('pause-screen').classList.remove('active');
             window.gameUI.isPaused = false;
        });
    });
</script>

</body>
</html>